#!/bin/bash
# Update All Packages
echo -e "\e[36;1mUpdate All Packages!
\e[m"

# Update Pacman packages
## Sync repository and update packages
echo -e "\e[33;1mUpdate pacman Packages!
\e[m"
yay -Syyu

## Delete cache
yay -Scc

## Install insufficient Pacman packages
yay -S --needed - < $HOME/work/pkglist/pacmanpkglist.txt

# Update homeBrew packages
## Update packages
echo -e "\e[33;1m
Update brew Packages!
\e[m"
brew update

## Upgrade packages
brew upgrade

## Clean up
brew cleanup

## Install insufficient brew packages
xargs brew install < $HOME/work/pkglist/brewpkglist.txt

## Check health
brew doctor

# Update go packages
echo -e "\e[33;1m
Update go Packages!
\e[m"
gup update

# Update GitHub Packages
echo -e "\e[33;1m
Update GitHub Packages!
\e[m"
ghq list | ghq get --update

## Install insufficient GitHub packages
xargs -I arg ghq get arg < $HOME/work/pkglist/ghpkglist.txt

# Update cargo packages
echo -e "\e[33;1m
Update cargo Packages!
\e[m"
cargo install-update -a

## Install insufficient cargo packages
xargs -I arg cargo install arg < $HOME/work/pkglist/cargopkglist.txt

# Update Volta
echo -e "\e[33;1m
Update Volta!
\e[m"
curl https://get.volta.sh | bash -s -- --skip-setup

# Update npm Packages
echo -e "\e[33;1m
Update npm Packages!
\e[m"
npm-check -u -g

## Install insufficient npm packages
xargs -I arg npm install -g arg < $HOME/work/pkglist/npmpkglist.txt

# Update pip Packages
pip-review --auto

## Install insufficient pip packages
pip install -r $HOME/work/pkglist/pipkglist.txt

# Update pkglist
echo -e "\e[33;1m
Update pkglist!
\e[m"
yay -Qq > $HOME/work/pkglist/pacmanpkglist.txt
brew leaves > $HOME/work/pkglist/brewpkglist.txt
ls $HOME/go/bin > $HOME/work/pkglist/gopkglist.txt
ghq list > $HOME/work/pkglist/ghpkglist.txt
cargo install --list | sed -e 's/ .*//g' | tr -s '\n' > $HOME/work/pkglist/cargopkglist.txt
volta list all | sed -n 's/^package \([^@]*\).*/\1/p' > $HOME/work/pkglist/npmpkglist.txt
pip freeze > $HOME/work/pkglist/pipkglist.txt

# DONE!
echo -e "\e[32;1mDone!\e[m"
