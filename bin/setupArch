#!/bin/bash
# INSTALL Git
sudo pacman -S Git

# MAKE GHQ yanosea DIRECTORY
mkdir -p $HOME/ghq/github.com/yanosea

# CLONE yanoseaLocalEnv
git clone https://github.com/yanosea/yanoLocalEnv.git $HOME/ghq/github.com/yanosea

# LINK yanoLocalEnv
ln -s $HOME/ghq/github.com/yanosea/yanoLocalEnv $HOME/work/

# CLONE yanoDotFiles
git clone https://github.com/yanosea/yanoDotFiles.git $HOME/ghq/github.com/yanosea

# LINK yanoDotFile
ln -s $HOME/ghq/github.com/yanosea/yanoDotFiles $HOME/dotfiles/
ln -s $HOME/ghq/github.com/yanosea/yanoDotFiles/.config $HOME/.config/
ln -s $HOME/ghq/github.com/yanosea/yanoDotFiles/.vim $HOME/.vim/
ln -s $HOME/ghq/github.com/yanosea/yanoDotFiles/.wanna $HOME/.wanna/

# MAKE XDG DIRECTORY
sudo cp -p $HOME/work/configFiles/xdgenv.sh /etc/profile.d/xdgenv.sh
mkdir -p $HOME/.cache
mkdir -p $HOME/.local/share
mkdir -p $HOME/.local/state

# SETTING
## Optimize Pacman mirror server
sudo cp -p $HOME/work/configFiles/mirrorlist /etc/pacman.d/mirrorlist

## Setup pacman configFiles
sudo cp -p $HOME/work/configFiles/pacman.conf /etc/pacman.conf

## Setup pacman hook
sudo cp -p $HOME/work/configFiles/pacmanpkglist.hook /etc/pacman.d/hooks

## Sync Repository and Update Packages
sudo pacman -Syyu

## Setup sysctl configFiles
sudo cp -p $HOME/work/configFiles/sysctl.conf /etc/sysctl.conf
sudo cp -p $HOME/work/configFiles/timesyncd.conf /etc/systemd/timesyncd.conf
sudo cp -p $HOME/work/configFiles/systemd-timesyncd.service /usr/lib/systemd/system/systemd-timesyncd.service

# INSTALL PACKAGES
## Install pacman packages from list
sudo pacman -S --needed - < $HOME/work/pkglist/pacmanpkglist.txt

## Install Linuxbrew
sudo sh -c "$(curl -fsSL https://raw.githubusercontent.com/Linuxbrew/install/master/install.sh)"

## Install Linuxbrew packages
brew tap arrow2nd/tap
brew tap goreleaser/tap
xargs brew install < $HOME/work/pkglist/brewpkglist.txt

## Install go packages
cd
xargs -I arg go install arg < $HOME/work/pkglist/gopkglist.txt
cd

## Install GitHub packages
xargs -I arg ghq get arg < $HOME/work/pkglist/ghpkglist.txt

### Make pacsummary
cd $HOME/ghq/github.com/sheepla/pacsummary
sudo make install
which pacsummary | sudo xargs mv -t $HOME/work/bin

### Make yay
cd  $HOME/ghq/aur.archlinux.org/yay
makepkg -si

### Link tpm
cd
mkdir $HOME/.config/tmux/plugins
ln -s $HOME/ghq/github.com/tmux-plugins/tpm $HOME/.config/tmux/plugins

## Install cargo
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

### Install cargo packages
xargs -I arg cargo install arg < $HOME/work/pkglist/cargopkglist.txt

## Install Volta
curl https://get.volta.sh | bash

### Install node LTS
volta install node

### Install npm LTS
volta install npm

### Install npm packages
xargs -I arg npm install -g arg < $HOME/work/pkglist/npmpkglist.txt

## Install pip packages
pip install -r $HOME/work/pkglist/pippkglist.txt

## Install Fisherman
curl -sL https://git.io/fisher | source && fisher install jorgebucaran/fisher

### Install Fish theme
fisher install oh-my-fish/theme-bobthefish
fisher install jethrokuan/z
fisher install pure-fish/pure
fisher install matchai/spacefishi
fisher install oh-my-fish/theme-zish

# CHANGE LOGIN SHELL TO ZSH
sudo cp -p $HOME/work/configFiles/zshenv /etc/zsh/zshenv
chsh -s /usr/sbin/zsh

# DONE!
echo Done!
